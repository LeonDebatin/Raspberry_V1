{% extends "base.html" %}

{% block title %}Selection - Scent Controller{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/selection.css') }}">
{% endblock %}

{% block content %}
<div class="selection-container">
    <div class="selection-header">
        <h2>Select Scent Formula</h2>
        <div class="instruction-text">
            <p>Usage: Just Click on any Scent Formula</p>
            <p>New? Try the<a href="#demo-btn" class="demo-link">Demo Mode</a>and our<a href="{{ url_for('quiz') }}" class="quiz-link">Quiz</a></p>
        </div>
        <!-- Scent Description Container -->
        <div id="scent-description" class="scent-description hidden">
            <div class="scent-text">
                <span id="scent-name"></span>
                <p id="scent-description-text"></p>
            </div>
        </div>
        
        <!-- Schedule Information Container -->
        <div id="schedule-info" class="schedule-info hidden">
            <div class="schedule-text">
                <span class="schedule-label">Schedule Active:</span>
                <span id="schedule-details"></span>
                <a href="" id="schedule-edit-link" class="schedule-link">Edit Schedule</a>
            </div>
        </div>
    </div>
    
    <div class="radial-container">
        <!-- Progress Circle for Schedule Indication -->
        <div class="progress-circle-container" id="progress-circle-container">
            <svg class="progress-circle" viewBox="0 0 200 200">
                <!-- Background circle (always grey) -->
                <circle cx="100" cy="100" r="85" class="progress-bg" />
                <!-- Cycle progress indicator (only duration portion colored) -->
                <circle cx="100" cy="100" r="85" class="progress-cycle" id="progress-cycle" />
            </svg>
            <!-- Moving indicator ball (separate element for highest z-index) -->
            <div class="progress-indicator" id="progress-indicator"></div>
        </div>
        
        <!-- Main Formula Selection Circle -->
        <div class="radial">
            <button class="dot off" id="off-btn" data-color="off">OFF</button>
            <button class="dot crimson" data-color="red">CRIMSON</button>
            <button class="dot azure" data-color="blue">AZURE</button>
            <button class="dot amber" data-color="yellow">AMBER</button>
            <button class="dot sage" data-color="green">SAGE</button>
        </div>
    </div>
    
    <div class="config-bar">
        <div class="config-section">
            <label class="config-label">Diffusion Duration</label>
            <div class="slider-container">
                <input type="range" id="diffusion-slider" class="diffusion-slider" 
                       min="5" max="60" value="10" step="5">
                <div class="slider-value">
                    <span id="diffusion-seconds">10</span>s of 60s
                </div>
            </div>
        </div>
        <div class="config-section">
            <label class="config-label">Demo Mode</label>
            <button id="demo-btn" class="demo-btn">Start Demo</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/selection.js') }}"></script>
{% endblock %}